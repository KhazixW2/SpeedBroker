# ğŸ“ é¡¹ç›®ç»“æ„è¯¦è§£

## æ€»ä½“æ¶æ„

æœ¬é¡¹ç›®é‡‡ç”¨**äº”å±‚æ¨¡å—åŒ–æ¶æ„**ï¼Œæ¯å±‚èŒè´£æ˜ç¡®ï¼Œç›¸äº’è§£è€¦ã€‚

```
SpeedBroker/                         # é¡¹ç›®æ ¹ç›®å½•
â”‚
â”œâ”€â”€ ğŸ“‹ é…ç½®ä¸æ–‡æ¡£
â”‚   â”œâ”€â”€ config.py                    # [é…ç½®å±‚] é¡¹ç›®çš„"æ§åˆ¶é¢æ¿"
â”‚   â”œâ”€â”€ README.md                    # é¡¹ç›®è¯´æ˜
â”‚   â”œâ”€â”€ requirements.txt             # ä¾èµ–åŒ…åˆ—è¡¨
â”‚   â””â”€â”€ docs/                        # è¯¦ç»†æ–‡æ¡£ç›®å½•
â”‚       â”œâ”€â”€ PROJECT_STRUCTURE.md     # æœ¬æ–‡ä»¶ - é¡¹ç›®ç»“æ„è¯´æ˜
â”‚       â”œâ”€â”€ USER_GUIDE.md            # ä½¿ç”¨æ‰‹å†Œ
â”‚       â””â”€â”€ CONFIG_GUIDE.md          # é…ç½®å‚æ•°æ‰‹å†Œ
â”‚
â”œâ”€â”€ ğŸ¯ æ ¸å¿ƒæ¨¡å— (äº”å±‚æ¶æ„)
â”‚   â”œâ”€â”€ main.py                      # [ä¸»æ§å±‚] ç¨‹åºå…¥å£ï¼Œåè°ƒæ‰€æœ‰æ¨¡å—
â”‚   â”œâ”€â”€ data_handler.py              # [æ•°æ®å±‚] æ•°æ®è·å–ã€æ¸…æ´—ã€ç¼“å­˜
â”‚   â”œâ”€â”€ strategy.py                  # [ç­–ç•¥å±‚] äº¤æ˜“ç­–ç•¥å®ç°
â”‚   â”œâ”€â”€ backtester.py                # [å›æµ‹å±‚] äº¤æ˜“æ¨¡æ‹Ÿã€èµ„é‡‘ç®¡ç†
â”‚   â””â”€â”€ analyzer.py                  # [åˆ†æå±‚] æ€§èƒ½è¯„ä¼°ã€å¯è§†åŒ–
â”‚
â”œâ”€â”€ ğŸ“Š æ•°æ®ä¸è¾“å‡º
â”‚   â”œâ”€â”€ data/                        # æ•°æ®ç›®å½•
â”‚   â”‚   â””â”€â”€ cache/                   # ç¼“å­˜çš„è‚¡ç¥¨æ•°æ® (.pklæ–‡ä»¶)
â”‚   â”œâ”€â”€ output/                      # è¾“å‡ºç›®å½•
â”‚   â”‚   â”œâ”€â”€ *.png                    # ç”Ÿæˆçš„å¯è§†åŒ–å›¾è¡¨
â”‚   â”‚   â””â”€â”€ *.csv                    # äº¤æ˜“æ—¥å¿—CSVæ–‡ä»¶
â”‚   â””â”€â”€ logs/                        # æ—¥å¿—ç›®å½•
â”‚       â””â”€â”€ backtest.log             # å›æµ‹è¿è¡Œæ—¥å¿—
â”‚
â””â”€â”€ ğŸ”§ å·¥å…·è„šæœ¬
    â””â”€â”€ test_akshare.py              # æ•°æ®æºè¯Šæ–­æµ‹è¯•è„šæœ¬
```

---

## æ ¸å¿ƒæ¨¡å—è¯¦è§£

### 1. é…ç½®ä¸ä¸»æ§å±‚

#### `config.py` - é…ç½®æ–‡ä»¶ ğŸ›ï¸
**èŒè´£**ï¼šé›†ä¸­ç®¡ç†æ‰€æœ‰å¯å˜å‚æ•°

**ä¸»è¦é…ç½®å—**ï¼š
- `DATA_CONFIG` - æ•°æ®ç›¸å…³é…ç½®ï¼ˆè‚¡ç¥¨ä»£ç ã€æ—¶é—´èŒƒå›´ã€æ•°æ®æºï¼‰
- `STRATEGY_CONFIG` - ç­–ç•¥å‚æ•°é…ç½®ï¼ˆç­–ç•¥åç§°ã€æŒ‡æ ‡å‘¨æœŸï¼‰
- `BACKTEST_CONFIG` - å›æµ‹å‚æ•°é…ç½®ï¼ˆèµ„é‡‘ã€æ‰‹ç»­è´¹ã€æ»‘ç‚¹ï¼‰
- `ANALYSIS_CONFIG` - åˆ†æé…ç½®ï¼ˆæ— é£é™©åˆ©ç‡ã€å›¾è¡¨ä¿å­˜ï¼‰
- `LOGGING_CONFIG` - æ—¥å¿—é…ç½®

**è®¾è®¡ç†å¿µ**ï¼šé…ç½®é©±åŠ¨ï¼Œä¿®æ”¹å‚æ•°æ— éœ€æ”¹åŠ¨æ ¸å¿ƒä»£ç 

---

#### `main.py` - ä¸»æ§ç¨‹åº ğŸ®
**èŒè´£**ï¼šç¨‹åºçš„"æ€»æŒ‡æŒ¥"ï¼ŒæŒ‰é¡ºåºè°ƒç”¨å„æ¨¡å—

**æ‰§è¡Œæµç¨‹**ï¼š
```
å¯åŠ¨ â†’ åˆå§‹åŒ–æ¨¡å— â†’ è·å–æ•°æ® â†’ ç”Ÿæˆä¿¡å· â†’ 
æ‰§è¡Œå›æµ‹ â†’ åˆ†æç»“æœ â†’ ç”ŸæˆæŠ¥å‘Š â†’ ç»“æŸ
```

**å…³é”®å‡½æ•°**ï¼š
- `print_header()` - æ‰“å°å¯åŠ¨æ¨ªå¹…
- `run()` - ä¸»å‡½æ•°ï¼Œåè°ƒæ•´ä¸ªå›æµ‹æµç¨‹
- å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼ˆKeyboardInterruptã€Exceptionï¼‰

**è¾“å‡ºä¿¡æ¯**ï¼š
- æ¯ä¸ªæ­¥éª¤çš„è¿›åº¦æç¤º
- æ€§èƒ½æŒ‡æ ‡æ‘˜è¦
- äº¤æ˜“è®°å½•è¡¨æ ¼

---

### 2. æ•°æ®å±‚

#### `data_handler.py` - æ•°æ®å¤„ç†å™¨ ğŸ“Š
**èŒè´£**ï¼šå”¯ä¸€çš„æ•°æ®æ¥æºï¼Œå±è”½æ•°æ®æºå·®å¼‚

**ç±»ç»“æ„**ï¼š
```python
DataHandler
  â”‚
  â”œâ”€â”€ get_data()              # å¯¹å¤–æä¾›æ•°æ®çš„æ ¸å¿ƒæ–¹æ³•
  â”œâ”€â”€ _fetch_from_source()    # è·¯ç”±åˆ°å…·ä½“æ•°æ®æº
  â”œâ”€â”€ _fetch_from_akshare()   # AkShareæ•°æ®è·å–
  â”œâ”€â”€ _fetch_from_yfinance()  # yfinanceæ•°æ®è·å–
  â”œâ”€â”€ _clean_data()           # æ•°æ®æ¸…æ´—
  â”œâ”€â”€ _load_from_cache()      # ä»ç¼“å­˜åŠ è½½
  â””â”€â”€ _save_to_cache()        # ä¿å­˜åˆ°ç¼“å­˜
```

**æ ¸å¿ƒåŠŸèƒ½**ï¼š

1. **å¤šæ•°æ®æºæ”¯æŒ**
   - yfinanceï¼ˆæ¨èï¼‰ï¼šå…¨çƒå¸‚åœºï¼Œæ•°æ®ç¨³å®š
   - akshareï¼šä¸­å›½å¸‚åœºï¼Œå…è´¹æ— é™åˆ¶

2. **æ•°æ®æ¸…æ´—**
   - åˆ é™¤ç¼ºå¤±å€¼å’Œé‡å¤å€¼
   - æ•°æ®ç±»å‹è½¬æ¢
   - å¼‚å¸¸å€¼è¿‡æ»¤ï¼ˆä»·æ ¼â‰¤0ï¼‰
   - æŒ‰æ—¥æœŸæ’åº

3. **ç¼“å­˜æœºåˆ¶**
   - é¦–æ¬¡ä¸‹è½½åè‡ªåŠ¨ç¼“å­˜åˆ°æœ¬åœ°
   - åç»­ä½¿ç”¨ç›´æ¥è¯»å–ç¼“å­˜
   - ç¼“å­˜æ–‡ä»¶å‘½åè§„åˆ™ï¼š`{è‚¡ç¥¨ä»£ç }_{å¼€å§‹æ—¥æœŸ}_{ç»“æŸæ—¥æœŸ}_{æ•°æ®æº}.pkl`

**è¿”å›æ•°æ®æ ¼å¼**ï¼š
```python
DataFrame with columns:
  - Date (Index)    # æ—¥æœŸ
  - Open            # å¼€ç›˜ä»·
  - High            # æœ€é«˜ä»·
  - Low             # æœ€ä½ä»·
  - Close           # æ”¶ç›˜ä»·
  - Volume          # æˆäº¤é‡
  - Ticker          # è‚¡ç¥¨ä»£ç 
```

---

### 3. ç­–ç•¥å±‚

#### `strategy.py` - ç­–ç•¥å¼•æ“ ğŸ’¡
**èŒè´£**ï¼šç”Ÿæˆäº¤æ˜“ä¿¡å·ï¼Œå®ç°ç­–ç•¥æ€æƒ³

**ç±»å±‚æ¬¡ç»“æ„**ï¼š
```
BaseStrategy (æŠ½è±¡åŸºç±»)
  â”‚
  â”œâ”€â”€ DualMovingAverageStrategy    # åŒå‡çº¿ç­–ç•¥
  â”œâ”€â”€ RSIStrategy                   # RSIç­–ç•¥
  â””â”€â”€ [å¯æ‰©å±•æ›´å¤šç­–ç•¥]
```

**æ ¸å¿ƒæ¥å£**ï¼š
```python
def generate_signals(data: pd.DataFrame) -> pd.DataFrame:
    """
    è¾“å…¥: åŒ…å«OHLCVçš„DataFrame
    è¾“å‡º: æ·»åŠ äº†signalåˆ—çš„DataFrame
          signal = 1  (ä¹°å…¥)
          signal = -1 (å–å‡º)
          signal = 0  (æŒæœ‰)
    """
```

**å·²å®ç°ç­–ç•¥**ï¼š

1. **åŒå‡çº¿ç­–ç•¥** (DualMovingAverageStrategy)
   - **åŸç†**ï¼šçŸ­æœŸå‡çº¿ä¸é•¿æœŸå‡çº¿çš„äº¤å‰
   - **ä¹°å…¥ä¿¡å·**ï¼šé‡‘å‰ï¼ˆçŸ­æœŸå‡çº¿ä¸Šç©¿é•¿æœŸå‡çº¿ï¼‰
   - **å–å‡ºä¿¡å·**ï¼šæ­»å‰ï¼ˆçŸ­æœŸå‡çº¿ä¸‹ç©¿é•¿æœŸå‡çº¿ï¼‰
   - **å‚æ•°**ï¼š
     * `short_window` - çŸ­æœŸå‡çº¿å‘¨æœŸï¼ˆå¦‚10æ—¥ï¼‰
     * `long_window` - é•¿æœŸå‡çº¿å‘¨æœŸï¼ˆå¦‚30æ—¥ï¼‰

2. **RSIç­–ç•¥** (RSIStrategy) - é¢„ç•™æ‰©å±•
   - **åŸç†**ï¼šç›¸å¯¹å¼ºå¼±æŒ‡æ ‡ï¼Œåˆ¤æ–­è¶…ä¹°è¶…å–
   - **ä¹°å…¥ä¿¡å·**ï¼šRSI < è¶…å–é˜ˆå€¼ï¼ˆå¦‚30ï¼‰
   - **å–å‡ºä¿¡å·**ï¼šRSI > è¶…ä¹°é˜ˆå€¼ï¼ˆå¦‚70ï¼‰

**ç­–ç•¥å·¥å‚** (StrategyFactory)ï¼š
```python
strategy = StrategyFactory.create_strategy(config)
```
æ ¹æ®é…ç½®è‡ªåŠ¨åˆ›å»ºå¯¹åº”ç­–ç•¥å®ä¾‹

---

### 4. å›æµ‹å±‚

#### `backtester.py` - å›æµ‹å¼•æ“ âš™ï¸
**èŒè´£**ï¼šæ¨¡æ‹ŸçœŸå®äº¤æ˜“ï¼Œè€ƒè™‘æˆæœ¬å› ç´ 

**ç±»ç»“æ„**ï¼š
```python
Backtester
  â”‚
  â”œâ”€â”€ run_backtest()           # æ‰§è¡Œå›æµ‹ä¸»å‡½æ•°
  â””â”€â”€ calculate_trade_stats()  # è®¡ç®—äº¤æ˜“ç»Ÿè®¡
```

**å›æµ‹ç‰¹ç‚¹**ï¼š

1. **çŸ¢é‡åŒ–å›æµ‹** (Vectorized Backtesting)
   - é€æ—¥éå†æ•°æ®ï¼Œæ¨¡æ‹Ÿäº¤æ˜“å†³ç­–
   - è®°å½•æ¯æ—¥æŒä»“ã€ç°é‡‘ã€æ€»èµ„äº§

2. **Aè‚¡äº¤æ˜“è§„åˆ™**
   - æœ€å°äº¤æ˜“å•ä½ï¼š100è‚¡ï¼ˆ1æ‰‹ï¼‰
   - è®¡ç®—å¯ä¹°å…¥æ‰‹æ•°ï¼š`int(å¯ç”¨èµ„é‡‘ / (ä»·æ ¼ * 100)) * 100`

3. **äº¤æ˜“æˆæœ¬æ¨¡æ‹Ÿ**
   - **æ‰‹ç»­è´¹**ï¼šä¹°å…¥å’Œå–å‡ºéƒ½æ”¶å–ï¼ˆé»˜è®¤0.03%ï¼‰
   - **å°èŠ±ç¨**ï¼šä»…å–å‡ºæ—¶æ”¶å–ï¼ˆé»˜è®¤0.1%ï¼‰
   - **æ»‘ç‚¹**ï¼šä¹°å…¥æ—¶ä»·æ ¼ä¸Šæµ®ï¼Œå–å‡ºæ—¶ä»·æ ¼ä¸‹é™ï¼ˆé»˜è®¤0.01%ï¼‰

4. **èµ„é‡‘ç®¡ç†**
   - `position_size`ï¼šæ¯æ¬¡äº¤æ˜“ä½¿ç”¨çš„èµ„é‡‘æ¯”ä¾‹
   - æ”¯æŒå…¨ä»“äº¤æ˜“ï¼ˆ1.0ï¼‰æˆ–éƒ¨åˆ†ä»“ä½

5. **å¼ºåˆ¶å¹³ä»“**
   - å›æµ‹ç»“æŸæ—¶è‹¥ä»æœ‰æŒä»“ï¼ŒæŒ‰æœ€åä¸€æ—¥æ”¶ç›˜ä»·å¹³ä»“

**è¿”å›ç»“æœ**ï¼š
```python
{
    'portfolio_df': DataFrame,  # æ¯æ—¥èµ„äº§ç»„åˆçŠ¶æ€
    'trades': DataFrame,        # äº¤æ˜“è®°å½•
    'metrics': dict            # æ€§èƒ½æŒ‡æ ‡æ‘˜è¦
}
```

---

### 5. åˆ†æå±‚

#### `analyzer.py` - åˆ†æä¸æŠ¥å‘Š ğŸ“ˆ
**èŒè´£**ï¼šè¯„ä¼°ç­–ç•¥è¡¨ç°ï¼Œç”Ÿæˆä¸“ä¸šæŠ¥å‘Š

**ç±»ç»“æ„**ï¼š
```python
Analyzer
  â”‚
  â”œâ”€â”€ calculate_metrics()      # è®¡ç®—æ€§èƒ½æŒ‡æ ‡
  â”œâ”€â”€ print_metrics()          # æ‰“å°æ€§èƒ½æŠ¥å‘Š
  â”œâ”€â”€ plot_results()           # ç”Ÿæˆå¯è§†åŒ–å›¾è¡¨
  â”œâ”€â”€ _plot_price_and_signals()  # ç»˜åˆ¶ä»·æ ¼ä¸ä¿¡å·
  â”œâ”€â”€ _plot_portfolio_value()    # ç»˜åˆ¶èµ„äº§æ›²çº¿
  â”œâ”€â”€ _plot_drawdown()           # ç»˜åˆ¶å›æ’¤æ›²çº¿
  â””â”€â”€ save_trade_log()         # ä¿å­˜äº¤æ˜“æ—¥å¿—
```

**æ€§èƒ½æŒ‡æ ‡**ï¼š

1. **æ”¶ç›ŠæŒ‡æ ‡**
   - æ€»æ”¶ç›Šç‡ = (æœ€ç»ˆèµ„é‡‘ - åˆå§‹èµ„é‡‘) / åˆå§‹èµ„é‡‘
   - å¹´åŒ–æ”¶ç›Šç‡ = (1 + æ€»æ”¶ç›Šç‡) ^ (1/å¹´æ•°) - 1

2. **é£é™©æŒ‡æ ‡**
   - æ—¥æ³¢åŠ¨ç‡ = æ—¥æ”¶ç›Šç‡çš„æ ‡å‡†å·®
   - å¹´åŒ–æ³¢åŠ¨ç‡ = æ—¥æ³¢åŠ¨ç‡ Ã— âˆš252
   - æœ€å¤§å›æ’¤ = max((å½“å‰èµ„äº§ - å†å²å³°å€¼) / å†å²å³°å€¼)

3. **é£é™©è°ƒæ•´æ”¶ç›Š**
   - **å¤æ™®æ¯”ç‡** = (å¹´åŒ–è¶…é¢æ”¶ç›Š) / å¹´åŒ–æ³¢åŠ¨ç‡
     * >1.0 è¡¨ç¤ºè‰¯å¥½ï¼Œ>2.0 è¡¨ç¤ºä¼˜ç§€
   - **å¡ç›æ¯”ç‡** = å¹´åŒ–æ”¶ç›Šç‡ / |æœ€å¤§å›æ’¤|
     * è¶Šé«˜è¶Šå¥½ï¼Œè¡¡é‡å•ä½å›æ’¤çš„æ”¶ç›Š

4. **äº¤æ˜“ç»Ÿè®¡**
   - èƒœç‡ = ç›ˆåˆ©äº¤æ˜“æ¬¡æ•° / æ€»äº¤æ˜“æ¬¡æ•°
   - ç›ˆäºæ¯” = å¹³å‡ç›ˆåˆ© / å¹³å‡äºæŸ

**å¯è§†åŒ–å›¾è¡¨**ï¼ˆ3ä¸ªå­å›¾ï¼‰ï¼š

1. **ä»·æ ¼èµ°åŠ¿å›¾**
   - Kçº¿ï¼ˆæ”¶ç›˜ä»·ï¼‰
   - çŸ­æœŸå‡çº¿ï¼ˆè“è‰²ï¼‰
   - é•¿æœŸå‡çº¿ï¼ˆçº¢è‰²ï¼‰
   - ä¹°å…¥ç‚¹ï¼ˆçº¢è‰²å‘ä¸Šç®­å¤´ï¼‰
   - å–å‡ºç‚¹ï¼ˆç»¿è‰²å‘ä¸‹ç®­å¤´ï¼‰

2. **èµ„äº§æ›²çº¿å¯¹æ¯”**
   - ç­–ç•¥æ”¶ç›Šæ›²çº¿ï¼ˆè“è‰²å®çº¿ï¼‰
   - ä¹°å…¥æŒæœ‰åŸºå‡†ï¼ˆç°è‰²è™šçº¿ï¼‰

3. **å›æ’¤æ›²çº¿**
   - å›æ’¤åŒºåŸŸï¼ˆçº¢è‰²å¡«å……ï¼‰
   - æœ€å¤§å›æ’¤ç‚¹æ ‡æ³¨

**è¾“å‡ºæ–‡ä»¶**ï¼š
- å›¾è¡¨ï¼š`backtest_result_{è‚¡ç¥¨ä»£ç }_{æ—¶é—´æˆ³}.png`
- æ—¥å¿—ï¼š`trade_log_{è‚¡ç¥¨ä»£ç }_{æ—¶é—´æˆ³}.csv`

---

## æ•°æ®æµè½¬å›¾

```
[ç”¨æˆ·] 
  â†“ é…ç½®å‚æ•°
[config.py]
  â†“
[main.py] â† å¯åŠ¨ç¨‹åº
  â†“
  â”œâ”€â†’ [data_handler.py]
  â”‚     â†“ è·å–æ•°æ®
  â”‚   [yfinance/akshare API]
  â”‚     â†“ è¿”å›OHLCVæ•°æ®
  â”‚   [ç¼“å­˜åˆ°æœ¬åœ°]
  â”‚
  â”œâ”€â†’ [strategy.py]
  â”‚     â†“ è®¡ç®—æŒ‡æ ‡
  â”‚     â†“ ç”Ÿæˆä¿¡å· (1/-1/0)
  â”‚   [è¿”å›å¸¦ä¿¡å·çš„æ•°æ®]
  â”‚
  â”œâ”€â†’ [backtester.py]
  â”‚     â†“ æ¨¡æ‹Ÿäº¤æ˜“
  â”‚     â†“ è®¡ç®—æˆæœ¬
  â”‚     â†“ è®°å½•èµ„äº§å˜åŒ–
  â”‚   [è¿”å›å›æµ‹ç»“æœ]
  â”‚
  â””â”€â†’ [analyzer.py]
        â†“ è®¡ç®—æŒ‡æ ‡
        â†“ ç”Ÿæˆå›¾è¡¨
        â†“ ä¿å­˜æ–‡ä»¶
      [è¾“å‡ºæŠ¥å‘Š]
```

---

## è®¾è®¡æ¨¡å¼

### 1. **ç­–ç•¥æ¨¡å¼** (Strategy Pattern)
- `BaseStrategy` ä½œä¸ºæŠ½è±¡ç­–ç•¥
- å…·ä½“ç­–ç•¥ç±»å®ç°ä¸åŒçš„ä¿¡å·ç”Ÿæˆé€»è¾‘
- é€šè¿‡ `StrategyFactory` åŠ¨æ€åˆ›å»ºç­–ç•¥

### 2. **å·¥å‚æ¨¡å¼** (Factory Pattern)
- `StrategyFactory.create_strategy()` 
- æ ¹æ®é…ç½®åˆ›å»ºå¯¹åº”ç­–ç•¥å®ä¾‹

### 3. **æ¨¡æ¿æ–¹æ³•æ¨¡å¼** (Template Method)
- `BaseStrategy.generate_signals()` å®šä¹‰æ¥å£
- å­ç±»å®ç°å…·ä½“ç®—æ³•

### 4. **å•ä¸€èŒè´£åŸåˆ™** (SRP)
- æ¯ä¸ªæ¨¡å—åªè´Ÿè´£ä¸€ä»¶äº‹
- æ•°æ®å±‚åªç®¡æ•°æ®ï¼Œç­–ç•¥å±‚åªç®¡ä¿¡å·

### 5. **å¼€é—­åŸåˆ™** (OCP)
- å¯¹æ‰©å±•å¼€æ”¾ï¼šå¯æ·»åŠ æ–°ç­–ç•¥ã€æ–°æ•°æ®æº
- å¯¹ä¿®æ”¹å°é—­ï¼šæ·»åŠ åŠŸèƒ½ä¸éœ€ä¿®æ”¹ç°æœ‰ä»£ç 

---

## æ‰©å±•å¼€å‘æŒ‡å—

### æ·»åŠ æ–°ç­–ç•¥

1. åœ¨ `strategy.py` ä¸­åˆ›å»ºæ–°ç±»ï¼š
```python
class MACDStrategy(BaseStrategy):
    def __init__(self, config):
        super().__init__(config)
        self.fast = config.get('macd_fast', 12)
        self.slow = config.get('macd_slow', 26)
        self.signal = config.get('macd_signal', 9)
    
    def generate_signals(self, data):
        # å®ç°MACDç­–ç•¥é€»è¾‘
        # ...
        return data
```

2. åœ¨ `StrategyFactory` æ³¨å†Œï¼š
```python
strategies = {
    'DualMovingAverage': DualMovingAverageStrategy,
    'RSI': RSIStrategy,
    'MACD': MACDStrategy,  # æ–°å¢
}
```

3. åœ¨ `config.py` é…ç½®ï¼š
```python
STRATEGY_CONFIG = {
    'strategy_name': 'MACD',
    'macd_fast': 12,
    'macd_slow': 26,
    'macd_signal': 9,
}
```

### æ·»åŠ æ–°æ•°æ®æº

åœ¨ `data_handler.py` ä¸­æ·»åŠ æ–°æ–¹æ³•ï¼š
```python
def _fetch_from_tushare(self, tickers):
    # å®ç°Tushareæ•°æ®è·å–é€»è¾‘
    return data
```

---

## ä¾èµ–å…³ç³»

```
main.py
  â”œâ”€ depends on â†’ config.py
  â”œâ”€ depends on â†’ data_handler.py
  â”œâ”€ depends on â†’ strategy.py
  â”œâ”€ depends on â†’ backtester.py
  â””â”€ depends on â†’ analyzer.py

data_handler.py
  â”œâ”€ depends on â†’ pandas, numpy
  â””â”€ depends on â†’ yfinance/akshare

strategy.py
  â””â”€ depends on â†’ pandas, numpy

backtester.py
  â””â”€ depends on â†’ pandas, numpy

analyzer.py
  â””â”€ depends on â†’ pandas, numpy, matplotlib
```

---

## æ–‡ä»¶å‘½åè§„åˆ™

### ç¼“å­˜æ–‡ä»¶
- æ ¼å¼ï¼š`{è‚¡ç¥¨ä»£ç }_{å¼€å§‹æ—¥æœŸ}_{ç»“æŸæ—¥æœŸ}_{æ•°æ®æº}.pkl`
- ç¤ºä¾‹ï¼š`000001.SZ_20230101_20241001_yfinance.pkl`

### è¾“å‡ºå›¾è¡¨
- æ ¼å¼ï¼š`backtest_result_{è‚¡ç¥¨ä»£ç }_{æ—¶é—´æˆ³}.png`
- ç¤ºä¾‹ï¼š`backtest_result_000001.SZ_20251028_180502.png`

### äº¤æ˜“æ—¥å¿—
- æ ¼å¼ï¼š`trade_log_{è‚¡ç¥¨ä»£ç }_{æ—¶é—´æˆ³}.csv`
- ç¤ºä¾‹ï¼š`trade_log_000001.SZ_20251028_180523.csv`

---

## æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **ä½¿ç”¨ç¼“å­˜**ï¼šå¼€å¯ `use_cache=True`ï¼Œé¿å…é‡å¤ä¸‹è½½æ•°æ®
2. **çŸ¢é‡åŒ–è®¡ç®—**ï¼šä½¿ç”¨ pandas çš„å‘é‡åŒ–æ“ä½œï¼Œé¿å…å¾ªç¯
3. **æ•°æ®è¿‡æ»¤**ï¼šåªè·å–å¿…è¦çš„æ—¶é—´èŒƒå›´å’Œè‚¡ç¥¨
4. **å¹¶è¡Œå¤„ç†**ï¼šå¤šè‚¡ç¥¨å›æµ‹æ—¶å¯è€ƒè™‘å¹¶è¡Œå¤„ç†ï¼ˆæœªå®ç°ï¼‰

---

*æœ€åæ›´æ–°ï¼š2025-10-28*
